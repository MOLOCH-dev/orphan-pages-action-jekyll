<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="description" content="An Open Source Project for secure and robust containerized application management for constrained devices.">
	<meta property="og:title" content="Open Horizon" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://localhost:4000///docs/hub/prepare_for_edge_nodes.html" />
<meta property="og:image" content="http://localhost:4000//img/hero-dark.jpg">

	

	<meta name="citation_title" content="Project Pages - An Integrated Scientific Blogging Template">



	

	<link rel='shortcut icon' type='image/png' href='/img/favicon.png' />

    <title>Open Horizon</title>

    <link rel="canonical" href="http://localhost:4000/docs/hub/prepare_for_edge_nodes.html">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="http://localhost:4000/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="http://localhost:4000/css/clean-blog.css">

	<!-- Adjust Colors -->
    <link rel="stylesheet" href="http://localhost:4000/css/colorscheme.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="http://localhost:4000/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/css/normalize.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/cayman.css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	<!-- Math Jax -->
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	</script>
	<script type="text/javascript"
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
		TeX: { equationNumbers: { autoNumber: "AMS" } }
	});
	</script>

	<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js" type="text/javascript"></script>-->

    <!-- jQuery -->
	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

	<!-- Custom Theme JavaScript -->
	<script src="http://localhost:4000/js/clean-blog.min.js "></script>

    <!-- Clipboard.js -->
    <script src="http://localhost:4000/js/clipboard.min.js " ></script>

    <!-- CDN Hosted Clipboard.js -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script> -->


	

  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Open Horizon</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>

                <li>
                    <a href="/quick-start">Quick Start</a>
                </li>

                <li>
                    <a href="/docs/">Docs</a>
                </li>

                <!-- <li>
                    <a href="/blog">Blog</a>
                </li> -->

                <li>
                    <a href="/docs/getting_started/faq.html">FAQ</a>
                </li>


            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Page Header -->
<header class="intro-header" style="background-image: url('/img/hero-dark.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading" style="padding: 75px 0">
					
                    
                    

                    <h1 style="font-size:4.0em">Open Horizon</h1>
                    <hr class="small">

                    <span class="subheading">An Open Source Project for secure and robust containerized application management for constrained devices.</span>
                    

                </div>
            </div>
        </div>
    </div>
</header>

<div class="container">
	<div class="row">
      <div class="col-lg-12 col-md-12">
			
<h1 id="prepare_for_edge_nodes">Prepare for setting up edge nodes</h1>

<p>This content explains how to create an API key and gather some files and environment variable values that are needed when you set up edge nodes. Perform these steps on an admin host that can connect to your Open Horizon management hub cluster.</p>

<h2 id="before-you-begin">Before you begin</h2>

<ul>
  <li>If you have not already installed <strong>cloudctl</strong>, see <a href="../cli/cloudctl_oc_cli.md">Installing cloudctl, oc, and kubectl</a> to do that.</li>
  <li>Contact your Open Horizon administrator for the information that you need to log in to the management hub via <strong>cloudctl</strong>.</li>
</ul>

<h2 id="procedure">Procedure</h2>

<ol>
  <li>
    <p>Use <code class="language-plaintext highlighter-rouge">cloudctl</code> to log in to the Open Horizon management hub. Specify the user that you want to create an API key for:</p>

    <div class="language-bash codeblock highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cloudctl login <span class="nt">-a</span> &lt;cluster-url&gt; <span class="nt">-u</span> &lt;user&gt; <span class="nt">-p</span> &lt;password&gt; <span class="nt">--skip-ssl-validation</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Each user who is setting up edge nodes must have an API key. You can use the same API key to set up all of your edge nodes (it is not saved on the edge nodes). Create an API key:</p>

    <div class="language-bash codeblock highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cloudctl iam api-key-create <span class="s2">"&lt;choose-an-api-key-name&gt;"</span> <span class="nt">-d</span> <span class="s2">"&lt;choose-an-api-key-description&gt;"</span>
</code></pre></div>    </div>

    <p>Find the key value in the command output; this is the line that starts with <strong>API Key</strong>. Save the key value for future use because you cannot query it from the system later.</p>
  </li>
  <li>
    <p>If you have not already installed the <strong>horizon-cli</strong> package on this host, do that now. See <a href="/docs/hub/post_install.html#postconfig">Post installation configuration</a> for an example of this process.</p>
  </li>
  <li>
    <p>Locate the <strong>agent-install.sh</strong> and <strong>agent-uninstall.sh</strong> scripts that were installed as part of the <strong>horizon-cli</strong> package. These scripts are required on each edge node during setup (currently <strong>agent-uninstall.sh</strong> only supports edge clusters):</p>
    <ul>
      <li>Linux Linux example:</li>
    </ul>

    <div class="language-plaintext codeblock highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ls /usr/horizon/bin/agent-{install,uninstall}.sh
</code></pre></div>    </div>
  </li>
</ol>

<ul>
  <li>
    <p>macOS example:</p>

    <div class="language-plaintext codeblock highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls /usr/local/bin/agent-{install,uninstall}.sh
</code></pre></div>    </div>
  </li>
</ul>

<ol>
  <li>Contact your Open Horizon administrator for help in setting these environment variables:</li>
</ol>

<div class="language-bash codeblock highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">export</span> HZN_EXCHANGE_USER_AUTH<span class="o">=</span>iamapikey:&lt;api-key&gt;
  <span class="nb">export </span><span class="nv">HZN_ORG_ID</span><span class="o">=</span>&lt;your-exchange-organization&gt;
  <span class="nv">mgmtHubIngress</span><span class="o">=</span><span class="si">$(</span>oc get cm management-ingress-ibmcloud-cluster-info <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.data.cluster_ca_domain}'</span><span class="si">)</span>
  <span class="nb">export </span><span class="nv">HZN_FSS_CSSURL</span><span class="o">=</span>https://<span class="nv">$mgmtHubIngress</span>/edge-css/
  <span class="nb">echo</span> <span class="s2">"export HZN_FSS_CSSURL=</span><span class="nv">$HZN_FSS_CSSURL</span><span class="s2">"</span>
</code></pre></div></div>

<h2 id="whats-next">What’s next</h2>

<p>When you are ready to set up edge nodes, follow the steps in <a href="/docs/installing/installing_edge_nodes.html">Installing edge nodes</a>.</p>


      </div>
	</div>
</div>

<hr>


	
    <!-- Footer -->
<footer>

    <div class="container">
        <div class="row">
             <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> 
                 <ul class="list-inline text-center">
                    <!-- <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li> -->
                    
                    
                    
                    <li>
                        <a href="https://github.com/open-horizon">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
					
                    <li>
                        <a href="https://github.com/open-horizon/open-horizon.github.io/issues">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-exclamation fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		         <li>
                        <a href="https://wiki.lfedge.org/display/OH/Open+Horizon">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-info fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <!-- <li>
                        <a href="https://github.com/projectpages/project-pages/fork">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-code-fork fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li> -->
                    
                </ul> 

                <div align="center">
                  <div class="copytext"><p><a href="https://app.slack.com/client/THT8G7R0V/C011XLC1V2Q" target="_blank" style="text-decoration:none">Join Chat</a>   |   <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank" style="text-decoration:none">License</a>   |   ©2020 IBM. All rights reserved</p></div>

                </div>

        </div>
    </div>
</footer>


</body>

</html>
